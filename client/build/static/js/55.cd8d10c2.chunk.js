"use strict";(self.webpackChunkreact_ecommerce=self.webpackChunkreact_ecommerce||[]).push([[55],{8697:function(e,t,s){s.p,s(184)},5916:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var n=s(4165),r=s(5861),a=s(9439),c=s(7022),i=s(9743),o=s(2677),l=s(1413),d=(s(6294),s(184)),u=s(2791),m=function(e){var t=e.allProducts,s=void 0===t?[]:t,n=e.setFilterList,r=(0,u.useState)(""),c=(0,a.Z)(r,2),i=c[0],o=c[1],l=(0,u.useState)(!1),m=(0,a.Z)(l,2),h=m[0],p=m[1],f=(0,u.useRef)(null),x=(0,u.useCallback)((function(e){var t=e.target.value.toLowerCase();o(t),p(!0),f.current&&clearTimeout(f.current),f.current=setTimeout((function(){var e=s.filter((function(e){var s;return null===(s=e.productName)||void 0===s?void 0:s.toLowerCase().includes(t)}));n(e),p(!1)}),300)}),[s,n]);return(0,d.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=s.filter((function(e){var t;return null===(t=e.productName)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase())}));n(t)},className:"search-container",children:[(0,d.jsx)("input",{type:"text",placeholder:"Search tests and packages...",value:i,onChange:x,"aria-label":"Search tests and packages"}),(0,d.jsx)("button",{type:"submit",className:"search-button","aria-label":"Search",children:(0,d.jsx)("ion-icon",{name:h?"reload-outline":"search-outline",class:"search-icon ".concat(h?"searching":"")})})]})},h=s(7689),p=s(8934),f=function(e){var t=e.productItems,s=(0,u.useContext)(p.c).addToCart,n=(0,h.s0)();(0,u.useEffect)((function(){console.log("ShopList: productItems updated:",(null===t||void 0===t?void 0:t.length)||0,"items")}),[t]);return t&&0!==t.length?(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:(0,d.jsxs)("p",{className:"text-muted mb-0",children:["Showing all ",t.length," tests"]})}),(0,d.jsx)(i.Z,{className:"justify-content-center shop-list-grid",children:t.map((function(e,t){var r;if(!e||!e.productName)return console.warn("Invalid product item at index ".concat(t,":"),e),null;var a=e.id?"test-".concat(e.id):"shop-item-".concat(t,"-").concat(null===(r=e.productName)||void 0===r?void 0:r.replace(/\s+/g,"-"));return(0,d.jsxs)("div",{className:"shop-list-simple-row",style:{animationDelay:"".concat(t%6*.12,"s")},children:[(0,d.jsx)("div",{className:"shop-list-simple-name",tabIndex:0,role:"button","aria-label":"View details for ".concat(e.productName),onClick:function(){return n("/shop/".concat(e.id))},onKeyDown:function(t){"Enter"!==t.key&&" "!==t.key||n("/shop/".concat(e.id))},style:{cursor:"pointer"},children:e.productName}),(0,d.jsxs)("div",{className:"shop-list-simple-price",children:["\u20b9",e.price]}),(0,d.jsxs)("div",{className:"shop-list-simple-buttons",children:[(0,d.jsx)("button",{className:"shop-list-book-button","aria-label":"Book Now",onClick:function(){return n("/shop/".concat(e.id))},children:"Book Now"}),(0,d.jsx)("button",{className:"shop-list-add-to-cart-button","aria-label":"Add to Cart",onClick:function(){s(e)},children:"Add to Cart"})]})]},a)}))})]}):(0,d.jsx)("h1",{className:"not-found",children:"Product Not Found !!"})},x=(s(8697),s(3360)),j=function(e){var t=e.onBookNow,s=(0,u.useContext)(p.c),n=s.CartItem,r=s.deleteProduct,a=s.addToCart,c=s.setCartItem,i=n.reduce((function(e,t){return e+t.qty*t.price}),0);return(0,d.jsxs)("div",{className:"cart-summary-container",children:[(0,d.jsxs)("div",{className:"cart-summary-header",children:[(0,d.jsx)("h4",{className:"cart-summary-title",children:"Order Summary"}),n.length>0&&(0,d.jsx)("button",{className:"clear-all-button",onClick:function(){c([]),localStorage.setItem("cartItem",JSON.stringify([]))},title:"Clear all items",children:"\ud83d\uddd1\ufe0f"})]}),0===n.length?(0,d.jsxs)("div",{className:"empty-cart-message",children:[(0,d.jsx)("h5",{children:"Your cart is empty"}),(0,d.jsx)("p",{children:"Add some tests to get started"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"cart-items-list",children:n.map((function(e){var t=e.price*e.qty;return(0,d.jsx)("div",{className:"cart-item-card",children:(0,d.jsxs)("div",{className:"cart-item-details",children:[(0,d.jsx)("h6",{className:"cart-item-name",children:e.productName}),(0,d.jsxs)("p",{className:"cart-item-price",children:["\u20b9",e.price," x ",e.qty," = \u20b9",t]}),(0,d.jsxs)("div",{className:"cart-item-actions",children:[(0,d.jsx)(x.Z,{size:"sm",variant:"outline-success",className:"action-button",onClick:function(){return a(e)},children:"+"}),(0,d.jsx)(x.Z,{size:"sm",variant:"outline-warning",className:"action-button",onClick:function(){return function(e){var t=n.map((function(t){return t.id===e.id?(0,l.Z)((0,l.Z)({},t),{},{qty:t.qty-1}):t})).filter((function(e){return e.qty>0}));c(t),setTimeout((function(){localStorage.setItem("cartItem",JSON.stringify(t))}),0)}(e)},children:"\u2013"}),(0,d.jsx)(x.Z,{size:"sm",variant:"outline-danger",className:"action-button",onClick:function(){return r(e)},children:"\ud83d\uddd1"})]})]})},e.id)}))}),(0,d.jsxs)("div",{className:"cart-summary-footer",children:[(0,d.jsxs)("div",{className:"total-price",children:[(0,d.jsx)("span",{children:"Total Amount:"}),(0,d.jsxs)("span",{className:"price",children:["\u20b9",i]})]}),(0,d.jsx)(x.Z,{onClick:t,className:"add-more-button",children:"Book Now"})]})]})]})},v=s(7662),N=function(){var e=(0,u.useContext)(p.c),t=e.addToCart,s=e.cachedTests,l=e.testsLoading,x=e.fetchTests,N=((0,h.UO)().id,(0,u.useState)([])),g=(0,a.Z)(N,2),b=g[0],C=g[1],y=(0,u.useState)([]),k=(0,a.Z)(y,2),w=k[0],Z=k[1],S=(0,u.useState)(!1),I=(0,a.Z)(S,2),L=I[0],T=I[1],F=(0,u.useState)(!0),q=(0,a.Z)(F,2),A=q[0],B=q[1],E=(0,u.useRef)(null),P=(0,h.s0)();(0,u.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Shop: Loading products, cachedTests:",s.length,"testsLoading:",l),!(s.length>0)){e.next=8;break}console.log("Shop: Using cached tests"),C(s),Z(s),B(!1),e.next=24;break;case 8:return console.log("Shop: Fetching tests from API"),B(!0),e.prev=10,e.next=13,x();case 13:t=e.sent,console.log("Shop: Fetched tests:",(null===t||void 0===t?void 0:t.length)||0),t&&t.length>0&&(C(t),Z(t)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),console.error("Shop: Error fetching tests:",e.t0);case 21:return e.prev=21,B(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[10,18,21,24]])})));return function(){return e.apply(this,arguments)}}();e(),window.scrollTo(0,0)}),[s.length,x]);return(0,u.useEffect)((function(){console.log("Shop: filterList updated:",w.length,"items")}),[w]),A?(0,d.jsx)(u.Fragment,{children:(0,d.jsx)("section",{className:"filter-bar",children:(0,d.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem"},children:[(0,d.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,d.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,d.jsx)("p",{style:{marginTop:"1rem"},children:"Loading tests..."})]})})}):(0,d.jsxs)(u.Fragment,{children:[(0,d.jsxs)("section",{className:"filter-bar",children:[(0,d.jsx)(c.Z,{className:"filter-bar-container",children:(0,d.jsx)(i.Z,{className:"justify-content-center",children:(0,d.jsx)(o.Z,{md:12,children:(0,d.jsx)(m,{allProducts:b,setFilterList:Z})})})}),(0,d.jsx)(c.Z,{children:(0,d.jsxs)(i.Z,{children:[(0,d.jsx)(o.Z,{md:8,children:(0,d.jsx)(f,{productItems:w,addToCart:t})}),(0,d.jsx)(o.Z,{md:4,ref:E,children:(0,d.jsx)(j,{onBookNow:function(){return P("/cart")}})})]})}),(0,d.jsx)("button",{onClick:function(){E.current&&E.current.scrollIntoView({behavior:"smooth"})},className:"fixed-view-cart-button",children:"View Cart"})]}),L&&(0,d.jsx)(v.Z,{show:L,handleClose:function(){return T(!1)},CartItem:w,setCartItem:function(){}})]})}}}]);
//# sourceMappingURL=55.cd8d10c2.chunk.js.map